(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[108],{3915:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/account-settings",function(){return a(930)}])},930:(e,s,a)=>{"use strict";a.r(s),a.d(s,{__N_SSP:()=>o,default:()=>d});var r=a(5893),t=a(7294),l=a(3299),n=a(1163),o=!0;function d(){let{data:e}=(0,l.useSession)(),[s,a]=(0,t.useState)({firstName:"",lastName:"",gender:"",status:"",employeeNo:"",username:"",currentPassword:"",password:"",confirmPassword:""}),o=(0,n.useRouter)();(0,t.useEffect)(()=>{var s;(null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.id)&&fetch("/api/user/".concat(e.user.id)).then(e=>e.json()).then(e=>{a({firstName:e.firstName||"",lastName:e.lastName||"",gender:e.gender||"",status:e.status||"",employeeNo:e.employeeNo||"",username:e.username||"",currentPassword:"",password:"",confirmPassword:""})}).catch(e=>console.error("Failed to fetch user data",e))},[e]);let d=async a=>{if(a.preventDefault(),s.password&&s.password!==s.confirmPassword){alert("Passwords do not match!");return}if(!s.currentPassword){alert("Please enter your current password to confirm changes.");return}(await fetch("/api/user/".concat(e.user.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?(alert("Account updated successfully!"),await (0,l.signIn)("credentials",{redirect:!1}),o.push("/app/dashboard")):alert("Failed to update account")};return e?(0,r.jsxs)("div",{className:"container mx-auto p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Account Settings"}),(0,r.jsxs)("form",{onSubmit:d,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"First Name"}),(0,r.jsx)("input",{type:"text",value:s.firstName,onChange:e=>a({...s,firstName:e.target.value}),className:"w-full border p-2 mb-4"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Last Name"}),(0,r.jsx)("input",{type:"text",value:s.lastName,onChange:e=>a({...s,lastName:e.target.value}),className:"w-full border p-2 mb-4"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Gender"}),(0,r.jsxs)("select",{value:s.gender,onChange:e=>a({...s,gender:e.target.value}),className:"w-full border p-2 mb-4",children:[(0,r.jsx)("option",{value:"",children:"Select Gender"}),(0,r.jsx)("option",{value:"Male",children:"Male"}),(0,r.jsx)("option",{value:"Female",children:"Female"}),(0,r.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Status"}),(0,r.jsxs)("select",{value:s.status,onChange:e=>a({...s,status:e.target.value}),className:"w-full border p-2 mb-4",children:[(0,r.jsx)("option",{value:"",children:"Select Status"}),(0,r.jsx)("option",{value:"active",children:"Active"}),(0,r.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Employee No"}),(0,r.jsx)("input",{type:"text",value:s.employeeNo,readOnly:!0,className:"w-full border p-2 mb-4 bg-gray-100"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Username"}),(0,r.jsx)("input",{type:"text",value:s.username,onChange:e=>a({...s,username:e.target.value}),className:"w-full border p-2 mb-4"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Current Password"}),(0,r.jsx)("input",{type:"password",value:s.currentPassword,onChange:e=>a({...s,currentPassword:e.target.value}),className:"w-full border p-2 mb-4",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"New Password (optional)"}),(0,r.jsx)("input",{type:"password",value:s.password,onChange:e=>a({...s,password:e.target.value}),className:"w-full border p-2 mb-4"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Confirm Password (optional)"}),(0,r.jsx)("input",{type:"password",value:s.confirmPassword,onChange:e=>a({...s,confirmPassword:e.target.value}),className:"w-full border p-2 mb-4"})]}),(0,r.jsx)("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",children:"Save Changes"})]})]}):(0,r.jsx)("p",{children:"Loading..."})}}},e=>{var s=s=>e(e.s=s);e.O(0,[888,774,179],()=>s(3915)),_N_E=e.O()}]);