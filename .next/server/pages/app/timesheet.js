(()=>{var e={};e.id=485,e.ids=[485,660,888],e.modules={1323:(e,r)=>{"use strict";Object.defineProperty(r,"l",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})},3158:(e,r,t)=>{"use strict";t.r(r),t.d(r,{config:()=>j,default:()=>m,getServerSideProps:()=>b,getStaticPaths:()=>g,getStaticProps:()=>p,reportWebVitals:()=>f,routeModule:()=>k,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>P,unstable_getStaticParams:()=>N,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>S});var s={};t.r(s),t.d(s,{default:()=>h,getServerSideProps:()=>x});var a=t(5872),n=t(3593),i=t(1323),l=t(582),c=t(2397),d=t(997),o=t(6689),u=t(1649);function h(){let[e,r]=(0,o.useState)("notStarted"),{data:t}=(0,u.useSession)(),[s,a]=(0,o.useState)(null),[n,i]=(0,o.useState)([]),l=e=>{e?e.timeOut?r("clockedOut"):e.breakStart&&!e.breakEnd?r("onBreak"):r("clockedIn"):r("notStarted")},c=async e=>{if(!t?.user?.id)return;let r=await fetch(`/api/timesheet/${t.user.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e})}),s=await r.json();r.ok?(a(s),l(s)):alert(s.error||"Failed to update timesheet")},h=(e,r)=>{let t={hour:"numeric",minute:"numeric",second:"numeric",hour12:!0},s=new Date(e).toLocaleTimeString("en-SG",t),a=r?new Date(r).toLocaleTimeString("en-SG",t):"In Progress";return`${s} - ${a}`},x=e=>{let r=Math.floor(e/1e3),t=Math.floor(r/3600),s=Math.floor(r%3600/60);return`${t}h ${s}m ${r%60}s`};return(0,d.jsxs)("div",{className:"container mx-auto p-6",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Timesheet"}),(0,d.jsxs)("table",{className:"min-w-full border-collapse border border-gray-200 mt-6",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"border border-gray-300 p-2",children:"Employee Name"}),(0,d.jsx)("th",{className:"border border-gray-300 p-2",children:"Date"}),(0,d.jsx)("th",{className:"border border-gray-300 p-2",children:"Duration"}),(0,d.jsx)("th",{className:"border border-gray-300 p-2",children:"Time Span"})]})}),(0,d.jsx)("tbody",{children:n.length>0?n.map(e=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"border border-gray-300 p-2",children:`${t?.user?.firstName} ${t?.user?.lastName}`}),(0,d.jsx)("td",{className:"border border-gray-300 p-2",children:new Date(e.timeIn).toLocaleDateString("en-SG")}),(0,d.jsx)("td",{className:"border border-gray-300 p-2",children:e.timeOut?x(new Date(e.timeOut)-new Date(e.timeIn)):"In Progress"}),(0,d.jsx)("td",{className:"border border-gray-300 p-2",children:h(e.timeIn,e.timeOut)})]},e.id)):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:"4",className:"border border-gray-300 p-2 text-center",children:"No timesheets found."})})})]}),(0,d.jsxs)("div",{className:"mt-6 flex gap-4",children:[(0,d.jsx)("button",{onClick:()=>c("timeIn"),className:`py-2 px-4 rounded ${"clockedIn"===e||"clockedOut"===e?"bg-gray-400 cursor-not-allowed":"bg-green-500 text-white"}`,disabled:"clockedIn"===e||"clockedOut"===e,children:"Time In"}),(0,d.jsx)("button",{onClick:()=>c("onBreak"===e?"breakEnd":"breakStart"),className:"bg-yellow-500 text-white py-2 px-4 rounded",disabled:"notStarted"===e||"clockedOut"===e,children:"onBreak"===e?"End Break":"Start Break"}),(0,d.jsx)("button",{onClick:()=>c("timeOut"),className:"bg-red-500 text-white py-2 px-4 rounded",disabled:"clockedIn"!==e,children:"Time Out"})]}),"clockedOut"===e&&(0,d.jsx)("p",{className:"mt-4 text-red-500",children:"You have clocked out for today."})]})}async function x(e){let r=await (0,u.getSession)(e);return r?{props:{session:r}}:{redirect:{destination:"/account/login",permanent:!1}}}let m=(0,i.l)(s,"default"),p=(0,i.l)(s,"getStaticProps"),g=(0,i.l)(s,"getStaticPaths"),b=(0,i.l)(s,"getServerSideProps"),j=(0,i.l)(s,"config"),f=(0,i.l)(s,"reportWebVitals"),S=(0,i.l)(s,"unstable_getStaticProps"),y=(0,i.l)(s,"unstable_getStaticPaths"),N=(0,i.l)(s,"unstable_getStaticParams"),v=(0,i.l)(s,"unstable_getServerProps"),P=(0,i.l)(s,"unstable_getServerSideProps"),k=new a.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/app/timesheet",pathname:"/app/timesheet",bundlePath:"",filename:""},components:{App:c.default,Document:l.default},userland:s})},2397:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var s=t(997),a=t(1649),n=t(1163);t(108);var i=t(1664),l=t.n(i);function c(){return(0,s.jsx)("nav",{className:"bg-gray-800 text-white p-4",children:(0,s.jsxs)("div",{className:"container mx-auto flex justify-between",children:[(0,s.jsx)("div",{className:"text-lg font-bold",children:(0,s.jsx)(l(),{href:"/",children:"My Website"})}),(0,s.jsx)("div",{children:(0,s.jsxs)("ul",{className:"flex space-x-4",children:[(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"/",className:"hover:text-gray-300",children:"Home"})}),(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"/about",className:"hover:text-gray-300",children:"About"})}),(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"/contact",className:"hover:text-gray-300",children:"Contact Us"})}),(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"/inquiries",className:"hover:text-gray-300",children:"Inquiries"})}),(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"/account/login",className:"hover:text-gray-300",children:"Sign In"})})]})})]})})}var d=t(6689);function o(){let[e,r]=(0,d.useState)(!1),{data:t}=(0,a.useSession)();return(0,s.jsx)("div",{className:"w-64 h-screen bg-gray-800 text-white flex flex-col fixed",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)("div",{className:"bg-gray-600 rounded-full w-12 h-12 flex items-center justify-center mr-3",children:(0,s.jsx)("span",{className:"text-lg",children:"\uD83D\uDC64"})}),(0,s.jsxs)("div",{className:"relative",children:[t&&t.user?(0,s.jsxs)("p",{className:"text-lg font-semibold cursor-pointer",onClick:()=>{r(!e)},children:[`${t.user.firstName} ${t.user.lastName}`," â–¼"]}):(0,s.jsx)("p",{children:"Loading..."}),e&&(0,s.jsx)("div",{className:"absolute bg-gray-700 mt-2 rounded shadow-lg w-48",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"/app/account-settings",className:"block py-2 px-4 hover:bg-gray-600 rounded",children:"Account Settings"})}),(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"/account/login",className:"block py-2 px-4 hover:bg-gray-600 rounded",children:"Log Out"})})]})})]})]}),(0,s.jsx)("nav",{className:"flex-grow",children:(0,s.jsxs)("ul",{className:"space-y-2",children:[(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"/app/dashboard",className:"block py-2 px-4 hover:bg-gray-700 rounded",children:"Dashboard"})}),(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"/app/employees",className:"block py-2 px-4 hover:bg-gray-700 rounded",children:"Employees"})}),(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"/app/timesheet",className:"block py-2 px-4 hover:bg-gray-700 rounded",children:"Timesheet"})})]})})]})})}let u=function({Component:e,pageProps:{session:r,...t}}){let i=(0,n.useRouter)().pathname.startsWith("/app");return(0,s.jsx)(a.SessionProvider,{session:r,children:(0,s.jsxs)("div",{className:"flex",children:[i&&(0,s.jsx)(o,{}),(0,s.jsxs)("main",{className:i?"ml-64 flex-grow p-6":"w-full",children:[!i&&(0,s.jsx)(c,{}),(0,s.jsx)(e,{...t})]})]})})}},582:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var s=t(997),a=t(6859);function n(){return(0,s.jsxs)(a.Html,{lang:"en",children:[(0,s.jsx)(a.Head,{}),(0,s.jsxs)("body",{className:"antialiased",children:[(0,s.jsx)(a.Main,{}),(0,s.jsx)(a.NextScript,{})]})]})}},108:()=>{},3593:(e,r)=>{"use strict";var t;Object.defineProperty(r,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE"}(t||(t={}))},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[706,424,859],()=>t(3158));module.exports=s})();