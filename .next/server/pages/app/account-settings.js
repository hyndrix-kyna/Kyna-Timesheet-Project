(()=>{var e={};e.id=108,e.ids=[108,660,888],e.modules={1323:(e,s)=>{"use strict";Object.defineProperty(s,"l",{enumerable:!0,get:function(){return function e(s,r){return r in s?s[r]:"then"in s&&"function"==typeof s.then?s.then(s=>e(s,r)):"function"==typeof s&&"default"===r?s:void 0}}})},9913:(e,s,r)=>{"use strict";r.r(s),r.d(s,{config:()=>v,default:()=>m,getServerSideProps:()=>f,getStaticPaths:()=>g,getStaticProps:()=>j,reportWebVitals:()=>b,routeModule:()=>A,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>P,unstable_getStaticProps:()=>N});var t={};r.r(t),r.d(t,{default:()=>h,getServerSideProps:()=>p});var a=r(5872),l=r(3593),n=r(1323),i=r(582),c=r(2397),o=r(997),d=r(6689),u=r(1649),x=r(1163);function h(){let{data:e}=(0,u.useSession)(),[s,r]=(0,d.useState)({firstName:"",lastName:"",gender:"",status:"",employeeNo:"",username:"",currentPassword:"",password:"",confirmPassword:""}),t=(0,x.useRouter)(),a=async r=>{if(r.preventDefault(),s.password&&s.password!==s.confirmPassword){alert("Passwords do not match!");return}if(!s.currentPassword){alert("Please enter your current password to confirm changes.");return}(await fetch(`/api/user/${e.user.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?(alert("Account updated successfully!"),await (0,u.signIn)("credentials",{redirect:!1}),t.push("/app/dashboard")):alert("Failed to update account")};return e?(0,o.jsxs)("div",{className:"container mx-auto p-6",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Account Settings"}),(0,o.jsxs)("form",{onSubmit:a,children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{children:"First Name"}),(0,o.jsx)("input",{type:"text",value:s.firstName,onChange:e=>r({...s,firstName:e.target.value}),className:"w-full border p-2 mb-4"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{children:"Last Name"}),(0,o.jsx)("input",{type:"text",value:s.lastName,onChange:e=>r({...s,lastName:e.target.value}),className:"w-full border p-2 mb-4"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{children:"Gender"}),(0,o.jsxs)("select",{value:s.gender,onChange:e=>r({...s,gender:e.target.value}),className:"w-full border p-2 mb-4",children:[(0,o.jsx)("option",{value:"",children:"Select Gender"}),(0,o.jsx)("option",{value:"Male",children:"Male"}),(0,o.jsx)("option",{value:"Female",children:"Female"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{children:"Status"}),(0,o.jsxs)("select",{value:s.status,onChange:e=>r({...s,status:e.target.value}),className:"w-full border p-2 mb-4",children:[(0,o.jsx)("option",{value:"",children:"Select Status"}),(0,o.jsx)("option",{value:"active",children:"Active"}),(0,o.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{children:"Employee No"}),(0,o.jsx)("input",{type:"text",value:s.employeeNo,readOnly:!0,className:"w-full border p-2 mb-4 bg-gray-100"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{children:"Username"}),(0,o.jsx)("input",{type:"text",value:s.username,onChange:e=>r({...s,username:e.target.value}),className:"w-full border p-2 mb-4"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{children:"Current Password"}),(0,o.jsx)("input",{type:"password",value:s.currentPassword,onChange:e=>r({...s,currentPassword:e.target.value}),className:"w-full border p-2 mb-4",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{children:"New Password (optional)"}),(0,o.jsx)("input",{type:"password",value:s.password,onChange:e=>r({...s,password:e.target.value}),className:"w-full border p-2 mb-4"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{children:"Confirm Password (optional)"}),(0,o.jsx)("input",{type:"password",value:s.confirmPassword,onChange:e=>r({...s,confirmPassword:e.target.value}),className:"w-full border p-2 mb-4"})]}),(0,o.jsx)("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",children:"Save Changes"})]})]}):(0,o.jsx)("p",{children:"Loading..."})}async function p(e){let s=await (0,u.getSession)(e);return s?{props:{session:s}}:{redirect:{destination:"/account/login",permanent:!1}}}let m=(0,n.l)(t,"default"),j=(0,n.l)(t,"getStaticProps"),g=(0,n.l)(t,"getStaticPaths"),f=(0,n.l)(t,"getServerSideProps"),v=(0,n.l)(t,"config"),b=(0,n.l)(t,"reportWebVitals"),N=(0,n.l)(t,"unstable_getStaticProps"),P=(0,n.l)(t,"unstable_getStaticPaths"),y=(0,n.l)(t,"unstable_getStaticParams"),w=(0,n.l)(t,"unstable_getServerProps"),S=(0,n.l)(t,"unstable_getServerSideProps"),A=new a.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/app/account-settings",pathname:"/app/account-settings",bundlePath:"",filename:""},components:{App:c.default,Document:i.default},userland:t})},2397:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>u});var t=r(997),a=r(1649),l=r(1163);r(108);var n=r(1664),i=r.n(n);function c(){return(0,t.jsx)("nav",{className:"bg-gray-800 text-white p-4",children:(0,t.jsxs)("div",{className:"container mx-auto flex justify-between",children:[(0,t.jsx)("div",{className:"text-lg font-bold",children:(0,t.jsx)(i(),{href:"/",children:"My Website"})}),(0,t.jsx)("div",{children:(0,t.jsxs)("ul",{className:"flex space-x-4",children:[(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/",className:"hover:text-gray-300",children:"Home"})}),(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/about",className:"hover:text-gray-300",children:"About"})}),(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/contact",className:"hover:text-gray-300",children:"Contact Us"})}),(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/inquiries",className:"hover:text-gray-300",children:"Inquiries"})}),(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/account/login",className:"hover:text-gray-300",children:"Sign In"})})]})})]})})}var o=r(6689);function d(){let[e,s]=(0,o.useState)(!1),{data:r}=(0,a.useSession)();return(0,t.jsx)("div",{className:"w-64 h-screen bg-gray-800 text-white flex flex-col fixed",children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center mb-6",children:[(0,t.jsx)("div",{className:"bg-gray-600 rounded-full w-12 h-12 flex items-center justify-center mr-3",children:(0,t.jsx)("span",{className:"text-lg",children:"\uD83D\uDC64"})}),(0,t.jsxs)("div",{className:"relative",children:[r&&r.user?(0,t.jsxs)("p",{className:"text-lg font-semibold cursor-pointer",onClick:()=>{s(!e)},children:[`${r.user.firstName} ${r.user.lastName}`," â–¼"]}):(0,t.jsx)("p",{children:"Loading..."}),e&&(0,t.jsx)("div",{className:"absolute bg-gray-700 mt-2 rounded shadow-lg w-48",children:(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/app/account-settings",className:"block py-2 px-4 hover:bg-gray-600 rounded",children:"Account Settings"})}),(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/account/login",className:"block py-2 px-4 hover:bg-gray-600 rounded",children:"Log Out"})})]})})]})]}),(0,t.jsx)("nav",{className:"flex-grow",children:(0,t.jsxs)("ul",{className:"space-y-2",children:[(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/app/dashboard",className:"block py-2 px-4 hover:bg-gray-700 rounded",children:"Dashboard"})}),(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/app/employees",className:"block py-2 px-4 hover:bg-gray-700 rounded",children:"Employees"})}),(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/app/timesheet",className:"block py-2 px-4 hover:bg-gray-700 rounded",children:"Timesheet"})})]})})]})})}let u=function({Component:e,pageProps:{session:s,...r}}){let n=(0,l.useRouter)().pathname.startsWith("/app");return(0,t.jsx)(a.SessionProvider,{session:s,children:(0,t.jsxs)("div",{className:"flex",children:[n&&(0,t.jsx)(d,{}),(0,t.jsxs)("main",{className:n?"ml-64 flex-grow p-6":"w-full",children:[!n&&(0,t.jsx)(c,{}),(0,t.jsx)(e,{...r})]})]})})}},582:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>l});var t=r(997),a=r(6859);function l(){return(0,t.jsxs)(a.Html,{lang:"en",children:[(0,t.jsx)(a.Head,{}),(0,t.jsxs)("body",{className:"antialiased",children:[(0,t.jsx)(a.Main,{}),(0,t.jsx)(a.NextScript,{})]})]})}},108:()=>{},3593:(e,s)=>{"use strict";var r;Object.defineProperty(s,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE"}(r||(r={}))},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[706,424,859],()=>r(9913));module.exports=t})();